<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Fluxo B3</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">
    <header class="bg-gradient-to-r from-blue-900 to-blue-700 p-6 text-white text-center shadow">
        <h1 class="text-3xl font-bold">üìä Fluxo de Investidores B3</h1>
        <p class="text-sm mt-1">Acompanhe o movimento de capital no mercado brasileiro dados mais recentes</p>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-10 space-y-10">
        <form method="POST" class="flex justify-center mb-6">
            <button type="submit" class="bg-blue-800 hover:bg-blue-900 text-white font-semibold py-3 px-6 rounded">
                üîÑ Atualizar Gr√°fico
            </button>
        </form>

        {% if imagem %}
        <div class="bg-white p-6 rounded-xl shadow">
            <img src="data:image/png;base64,{{ imagem }}" alt="Gr√°fico de Fluxo de Investidores" class="w-full rounded">
        </div>
        {% endif %}

        
<section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
    {% for key, label, cor in [
        ('estrangeiro_acum', 'Estrangeiro', 'blue-800'),
        ('institucional_acum', 'Institucional', 'orange-600'),
        ('pessoafisica_acum', 'Pessoa F√≠sica', 'green-600'),
        ('instfinanceira_acum', 'Inst. Financeira', 'teal-500'),
        ('outros_acum', 'Outros', 'purple-600')
    ] %}
    {% set valor = resumo[key] if resumo and key in resumo else 0 %}
    <div class="bg-white p-4 rounded shadow text-center border-l-4 border-{{ cor }}">
        <h3 class="text-{{ cor }} font-bold">{{ label }}</h3>
        <p class="text-xl font-semibold">R$ {{ "%.1f"|format(valor|float)|replace('.', ',') }}Bi</p>
        <p class="text-sm {{ 'text-green-600' if valor > 0 else 'text-red-600' }}">
            {{ 'Entrada l√≠quida' if valor > 0 else 'Sa√≠da l√≠quida' }}
        </p>
    </div>
    {% endfor %}
</section>

            <div class="bg-white p-4 rounded shadow text-center border-l-4 border-blue-800">
                <h3 class="text-blue-800 font-bold">Estrangeiro</h3>
                <p class="text-xl font-semibold">R$ 1,7Bi</p>
                <p class="text-sm text-red-600">Sa√≠da l√≠quida</p>
            </div>
            <div class="bg-white p-4 rounded shadow text-center border-l-4 border-orange-500">
                <h3 class="text-orange-600 font-bold">Institucional</h3>
                <p class="text-xl font-semibold">R$ 0,3Bi</p>
                <p class="text-sm text-red-600">Sa√≠da l√≠quida</p>
            </div>
            <div class="bg-white p-4 rounded shadow text-center border-l-4 border-green-600">
                <h3 class="text-green-600 font-bold">Pessoa F√≠sica</h3>
                <p class="text-xl font-semibold">R$ 2,8Bi</p>
                <p class="text-sm text-green-600">Entrada l√≠quida</p>
            </div>
            <div class="bg-white p-4 rounded shadow text-center border-l-4 border-teal-500">
                <h3 class="text-teal-600 font-bold">Inst. Financeira</h3>
                <p class="text-xl font-semibold">R$ 0,5Bi</p>
                <p class="text-sm text-red-600">Sa√≠da l√≠quida</p>
            </div>
            <div class="bg-white p-4 rounded shadow text-center border-l-4 border-purple-500">
                <h3 class="text-purple-600 font-bold">Outros</h3>
                <p class="text-xl font-semibold">R$ 0,1Bi</p>
                <p class="text-sm text-green-600">Entrada l√≠quida</p>
            </div>
        </section>

        <section class="grid md:grid-cols-2 gap-6 mt-12">
            <div class="bg-white rounded-xl p-6 shadow space-y-3">
                <h2 class="font-bold text-lg mb-2">üìò Defini√ß√µes dos Investidores</h2>
                <p><strong class="text-blue-800">Estrangeiro:</strong> Fundos e investidores internacionais.</p>
                <p><strong class="text-orange-600">Institucional:</strong> Fundos de pens√£o, seguradoras, etc.</p>
                <p><strong class="text-green-600">Pessoa F√≠sica:</strong> Investidores individuais na Bolsa.</p>
                <p><strong class="text-teal-600">Inst. Financeira:</strong> Bancos e corretoras.</p>
                <p><strong class="text-purple-600">Outros:</strong> Empresas, governo e n√£o categorizados.</p>
            </div>
            <div class="bg-white rounded-xl p-6 shadow space-y-4">
                <h2 class="font-bold text-lg mb-2">üìä An√°lise Atual</h2>
                <div class="bg-red-100 border-l-4 border-red-500 p-3">
                    <p class="font-semibold text-red-700">Fluxo Estrangeiro: Sa√≠da</p>
                    <p class="text-sm">Investidores estrangeiros reduziram posi√ß√µes.</p>
                </div>
                <div class="bg-red-100 border-l-4 border-red-500 p-3">
                    <p class="font-semibold text-red-700">Institucional: Sa√≠da</p>
                    <p class="text-sm">Institucionais reduziram exposi√ß√£o.</p>
                </div>
                <div class="bg-green-100 border-l-4 border-green-600 p-3">
                    <p class="font-semibold text-green-700">Pessoa F√≠sica: Entrada</p>
                    <p class="text-sm">Aproveitando oportunidades de compra.</p>
                </div>
            </div>
        </section>

        <footer class="text-center text-sm text-gray-500 mt-10">
            <p><strong>Fonte:</strong> B3 ‚Äì Dados atualizados diariamente</p>
            <p>@alan_richard ‚Äì Dashboard Fluxo de Investidores ‚Ä¢ Valores em bilh√µes de reais</p>
        </footer>
    </main>
</body>
</html>